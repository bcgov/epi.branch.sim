% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/setup_simulation.R
\name{create_state_df}
\alias{create_state_df}
\title{Creates a \code{state_df} object}
\usage{
create_state_df(
  n_cases,
  sim_params,
  sim_status,
  initialize = FALSE,
  import = FALSE,
  primary_state_df = NULL,
  primary_case_ids = NULL
)
}
\arguments{
\item{n_cases}{The number of cases to initialize in this dataframe}

\item{sim_params}{The \code{sim_params} object containing disease and simulation parameters}

\item{sim_status}{The \code{sim_status} state vector}

\item{initialize}{A boolean indicating whether these cases are the first cases of the
simulation. Defaults to \code{FALSE}. Initial cases are never traced.}

\item{import}{A boolean indicating whether these new cases are imported cases instead
of secondary infections. Defaults to \code{FALSE}. Imported cases are never
app users and are never traced.}

\item{primary_state_df}{When generating a \code{state_df} object for secondary infections, this
parameter should be the \code{state_df} object for the index/primary cases.
This should be \code{NULL} when there is no primary case. Defaults to \code{NULL}.}

\item{primary_case_ids}{When generating a \code{state_df} object for secondary infections, this
parameter should be a list of case_ids for the primary cases.
This should be \code{NULL} when there is no primary case. Defaults to \code{NULL}.}
}
\value{
A \code{state_df} dataframe object
}
\description{
This function creates a \code{state_df} dataframe object, which is used to track
active cases in the simulation.
}
\details{
The simulation's main \code{state_df} dataframe is created with this
function at the beginning of the simulation. When new cases are added (secondary or
imported infections), a \code{state_df} dataframe is created for these new cases
by \code{\link{generate_secondary_infections}} and \code{\link{generate_imported_infections}}.
The new \code{state_df} object is merged with the main \code{state_df} within
\code{\link{step_simulation}}.

The columns of this dataframe are: \code{case_id}, \code{status}, \code{is_traced},
\code{is_trace_app_user}, \code{is_trace_app_comply}, \code{is_traced_by_app},
\code{is_symptomatic}, \code{days_infected}, \code{incubation_length},
\code{isolation_delay}, \code{infection_length}, \code{contact_rate},
\code{n_sec_infects}, and \code{generation_intervals}. The meaning of these columns
will be documented elsewhere. Most of the columns are constant and are initialized
in this function via calls to related functions in draw_distributions.R. All time lengths
are in days and represent a relative time, not absolute times. The
\code{status}, \code{n_sec_infects} and \code{generation_intervals} columns are updated
over the course of the simulation as cases progress through infection states. The
\code{n_sec_infects} counter and corresponding \code{generation_intervals} list have its
elements removed as the secondary infections are loaded into the simulation. As cases
become isolated or inactive and no longer cause infections, they are removed from this
dataframe.

A companion dataframe, \code{rec_df}, is meant to be a complete record of all cases
that occurred in the simulation. This object is created by \code{\link{create_record_df}}
and tracks all times as the absolute amount of time passed since the simulation start.
}
